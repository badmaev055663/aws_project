<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>web and database project</title>

    <style>
        body {
          background-color: #7ca1d1;
        }
        label, button, select {
            margin-left: 20px;
            margin-top: 80px;
        }
    </style>

    <script>
        var imgProcess = (image_url, filter)=>{
            // сборка запроса
            var myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");
            var raw = JSON.stringify({"url": image_url, "type": filter});
            var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: raw,
                redirect: 'follow'
            };

            // отправка запроса
            fetch("https://h9kwqa8kce.execute-api.us-east-1.amazonaws.com/dev", requestOptions)
            .then(response => response.text())
            .then(result => { 
                // скачивание обработанной картинки
                var a = document.createElement('a');
                a.href = JSON.parse(result).body;
                a.setAttribute("download", a.href.slice(-11));
                a.click();
            })
        }  
    </script>

</head>
<body>
    
    <form>
        <label>URL of the image:</label>
        <input type="text" id="image_url">

        <label>filter type:</label>
        <select id="filter">
        <option value="BLUR"> blur </option>
        <option value="SHARPEN"> sharpen </option>
        <option value="EMBOSS"> emboss </option>
        </select>

        <button type="button" onclick="imgProcess(document.getElementById('image_url').value, document.getElementById('filter').value)"> process </button>
    </form>
   
</body>
</html>